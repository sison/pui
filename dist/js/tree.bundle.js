!function(e){function n(n){for(var r,i,d=n[0],s=n[1],u=n[2],o=0,g=[];o<d.length;o++)i=d[o],l[i]&&g.push(l[i][0]),l[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(c&&c(n);g.length;)g.shift()();return a.push.apply(a,u||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],r=!0,d=1;d<t.length;d++){var s=t[d];0!==l[s]&&(r=!1)}r&&(a.splice(n--,1),e=i(i.s=t[0]))}return e}var r={},l={tree:0},a=[];function i(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=r,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)i.d(t,r,function(n){return e[n]}.bind(null,r));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="./";var d=window.webpackJsonp=window.webpackJsonp||[],s=d.push.bind(d);d.push=n,d=d.slice();for(var u=0;u<d.length;u++)n(d[u]);var c=s;a.push(["./assets/admin/entry/tree.js","commons"]),t()}({"./assets/admin/entry/tree.js":
/*!************************************!*\
  !*** ./assets/admin/entry/tree.js ***!
  \************************************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";eval('/* WEBPACK VAR INJECTION */(function($, Pui) {/*\n * @Author: sison.luo\n * @Date:   2016-07-29 14:58:53\n * @Last Modified by: sison\n * @Last Modified time: 2018-07-05 17:12:56\n */\n\n\n\n__webpack_require__(/*! ../css/pui.css */ "./assets/admin/css/pui.css");\n__webpack_require__(/*! ../css/layout.css */ "./assets/admin/css/layout.css");\n__webpack_require__(/*! ../css/page-common.css */ "./assets/admin/css/page-common.css");\n__webpack_require__(/*! ../../fonts/style.css */ "./assets/fonts/style.css")\n__webpack_require__(/*! ../../libs/prism/prism.css */ "./assets/libs/prism/prism.css");\n\n__webpack_require__(/*! pjt-ui */ "./node_modules/_pjt-ui@1.0.6@pjt-ui/pui.min.js")\n__webpack_require__(/*! ../../libs/layout.js */ "./assets/libs/layout.js")\n\n\n$(function() {\n\n    var startData = {\n        zid: \'0001\',\n        value: \'都城的饭菜好难吃\',\n        themeStyle: 2,\n        theme1: [{\n            zid: \'00031\',\n            value: \'一级指标 111\',\n            defined: 1,\n            grade1: 1,\n            grade2: 1,\n            grade3: 1,\n            children: []\n        }],\n        theme2: [{\n            zid: \'00031\',\n            value: \'一级指标 111\',\n            defined: 1,\n            grade1: 1,\n            grade2: 1,\n            grade3: 1,\n            children: [{\n                zid: \'00031\',\n                value: \'二级指标 222\',\n                defined: 1,\n                grade1: 1,\n                grade2: 1,\n                grade3: 1,\n                children: []\n            }]\n        }],\n        theme3: [{\n            zid: \'00031\',\n            value: \'一级指标1\',\n            defined: 1,\n            grade1: 1,\n            grade2: 1,\n            grade3: 1,\n            children: [{\n                zid: \'000211\',\n                value: \'二级指标\',\n                defined: 1,\n                grade1: 1,\n                grade2: 1,\n                grade3: 1,\n                children: [{\n                    zid: \'000211\',\n                    value: \'三级指标\',\n                    defined: 1,\n                    grade1: 9,\n                    grade2: 9,\n                    grade3: 9,\n                    children: []\n                }]\n            }, {\n                zid: \'000211\',\n                value: \'二级指标\',\n                defined: 1,\n                grade1: 1,\n                grade2: 1,\n                grade3: 1,\n                children: [{\n                    zid: \'000211\',\n                    value: \'三级指标\',\n                    defined: 1,\n                    grade1: 1,\n                    grade2: 1,\n                    grade3: 1,\n                    children: []\n                }, {\n                    zid: \'000211\',\n                    value: \'三级指标\',\n                    defined: 1,\n                    grade1: 1,\n                    grade2: 1,\n                    grade3: 1,\n                    children: []\n                }, {\n                    zid: \'000211\',\n                    value: \'三级指标\',\n                    defined: 1,\n                    grade1: 1,\n                    grade2: 1,\n                    grade3: 1,\n                    children: []\n                }]\n            }]\n        }, {\n            zid: \'00031\',\n            value: \'一级指标2\',\n            defined: 1,\n            grade1: 1,\n            grade2: 1,\n            grade3: 1,\n            children: [{\n                zid: \'000211\',\n                value: \'二级指标\',\n                defined: 1,\n                grade1: 1,\n                grade2: 1,\n                grade3: 1,\n                children: []\n            }, {\n                zid: \'000211\',\n                value: \'二级指标\',\n                defined: 1,\n                grade1: 1,\n                grade2: 1,\n                grade3: 1,\n                children: [{\n                    zid: \'000211\',\n                    value: \'三级指标\',\n                    defined: 1,\n                    grade1: 1,\n                    grade2: 1,\n                    grade3: 1,\n                    children: []\n                }]\n            }]\n        }]\n    }\n    var tree = new Object();\n    tree.dom = $(\'#weightTree\');\n    tree.main = [false, true, true, false, false, false];\n    tree.width = [\'0\', \'35%\', \'35%\', \'10%\', \'10%\', \'10%\'];\n    tree.alias = [\'th0\', \'th1\', \'th2\', \'th3\', \'th4\', \'th5\'];\n    tree.header = [{\n        title: \'\',\n        formatter: function() {\n            return \'\';\n        }\n    }, {\n        title: \'\',\n        formatter: function() {\n            return \'<div class="insert-select tl"></div>\';\n        }\n\n    }, {\n        title: \'\',\n        formatter: function() {\n            return \'<p>指标权重</p>\';\n        }\n    }, {\n        title: \'\',\n        formatter: function() {\n            return \'<p>上级</p>\';\n        }\n    }, {\n        title: \'\',\n        formatter: function() {\n            return \'<p>同级</p>\';\n        }\n    }, {\n        title: \'\',\n        formatter: function() {\n            return \'<p>下级</p>\';\n        }\n    }];\n    tree.headersub = [{\n        title: \'\',\n        formatter: function() {\n            return \'\';\n        }\n    }, {\n        title: \'\',\n        formatter: function() {\n            return \'<p class="tl fs fbold pdl10 c-gray4"><span>模块名称</span><span class="pdl10 c-gray2">\' + startData.value + \'</span></p>\';\n        }\n    }, {\n        title: \'\',\n        formatter: function() {\n            return \'<div class="por100"><div style="padding-left: 10px;"><input type="text" class="txt wp100 tc c-gray3 disabled" disabled data-req="true" value="1" /></div><div class="abs tl"><span class="pdl10 c-gray3">100%</span></div></div>\';\n        }\n    }, {\n        title: \'\',\n        formatter: function() {\n            return \'<p>雏鸡程序员</p>\';\n        }\n    }, {\n        title: \'\',\n        formatter: function() {\n            return \'<p>中鸡程序员</p>\';\n        }\n    }, {\n        title: \'\',\n        formatter: function() {\n            return \'<p>高鸡程序员</p>\';\n        }\n    }];\n    tree.collapse = [{\n        title: \'\',\n        formatter: function() {\n            return \'\';\n        }\n    }, {\n        title: \'value\',\n        formatter: function(val) {\n            return \'<input type="text" class="txt wp100 disabled" disabled data-req="true" value="\' + val + \'" /> \';\n        }\n    }, {\n        title: \'defined\',\n        formatter: function(val) {\n            return \'<div class="por100"><input type="text" class ="txt wp100 tc c-gray3 zbweight" data-req="true" value ="\' + val + \'" /><div class="abs tl"><span class="pdl10 c-gray3 zbprecent">100%</span></div></div> \';\n        }\n    }, {\n        title: \'grade1\',\n        formatter: function(val) {\n            if (typeof val === \'object\') {\n                return \' <div class="pdl10 pdr10"><input type="text" name="\' + val.name + \'" class ="txt wp100 tc c-gray3" data-req="true" value ="\' + val.val + \'" /></div> \';\n            } else {\n                return \' <div class="pdl10 pdr10"><input type="text" class ="txt wp100 tc c-gray3" data-req="true" value ="\' + val + \'" /></div> \';\n            }\n        }\n    }, {\n        title: \'grade2\',\n        formatter: function(val) {\n            return \' <div class="pdl10 pdr10"><input type="text" class ="txt wp100 tc c-gray3" data-req="true" value ="\' + val + \'" /></div> \';\n        }\n    }, {\n        title: \'grade3\',\n        formatter: function(val) {\n            return \' <div class="pdl10 pdr10"><input type="text" class ="txt wp100 tc c-gray3" data-req="true" value ="\' + val + \'" /></div> \';\n        }\n    }];\n\n\n\n    var insertLevel = function(c, tree) {\n        var selectObj = \'\';\n\n        var zbtiptxt = \'<span class="pdl10 pdr10 fl">指标展开</span>\';\n        var zbweighttxt = \'<span class="pdl10 pdr10 fl">选择权重设置的指标层级</span>\';\n\n        var cnlv = ["零", "一", "二", "三", "四", "五", "六", "七"];\n        selectObj += \'<div class="select-group fl">\';\n        selectObj += \'<select class="select" data-width="75px">\';\n        //debugger;\n\n        if ($(\'.insert-select select\')) {\n            var curc = $(\'.insert-select select option\').length;\n            if (curc < c) {\n                //debugger;\n                $(\'.insert-select\').empty();\n                for (var lev = 1; lev <= c; lev++) {\n                    //if (lev === c) {\n                    //    selectObj += \'<option value=\' + lev + \' selected>\' + cnlv[lev] + \'级</option>\'\n                    //} else {\n                    selectObj += \'<option value=\' + lev + \'>\' + cnlv[lev] + \'级</option>\'\n                    //}\n                }\n                selectObj += \'</select>\';\n                selectObj += \'</div>\';\n                selectObj += \'</div>\';\n\n                $(\'.insert-select\').append(zbtiptxt);\n                $(\'.insert-select\').append(selectObj);\n                $(\'.insert-select select option\').eq(c - 1).attr(\'selected\', true);\n                $(\'.insert-select select\').selectSmart({\n                    callback: function(i, k, v) {\n                        //changeLevel(v, tree);\n                        Pui.togToggle(tree, v);\n                    }\n                })\n            }\n        }\n\n\n        // 权重selelctor\n        if ($(\'#weightSelector\')) {\n            $(\'#weightSelector\').append(zbweighttxt);\n            $(\'#weightSelector\').append(selectObj);\n            $(\'#weightSelector select\').selectSmart({\n                callback: function(i, k, v) {\n                    changeWeightState(i);\n                }\n            })\n        }\n    }\n\n    var checkoutTree = function(self, dtd) {\n        var dtd = $.Deferred();\n        // var start = (new Date()).getTime();\n        var c = 1;\n        if ($(\'.level3\', self).length > 0) {\n            c = 3;\n        } else if ($(\'.level2\', self).length > 0) {\n            c = 2;\n        } else if ($(\'.level1\', self).length > 0) {\n            c = 1;\n        }\n        dtd.resolve(c);\n        return dtd.promise();\n    }\n\n    var changePrecent = function(self) {\n        self.on(\'change\', \'input.zbweight\', function() {\n            var row = $(this).closest(\'.row\');\n            var rowul = row.closest(\'ul\') || null;\n            var siblings = row.siblings(\'.row\');\n            if (siblings.length > 0) {\n                var totalscore = 0;\n                for (var i = 0, leng = siblings.length + 1; i < leng; i++) {\n                    totalscore += parseInt(rowul.children(\'.row\').eq(i).find(\'.zbweight\').val());\n                }\n                totalscore;\n                rowul.children(\'.row\').each(function() {\n                    createRowResult.call($(this).find(\'.zbweight\').eq(0), totalscore);\n                })\n            } else {\n                debugger;\n                row.find(\'.zbprecent\').text(\'100%\');\n            }\n        });\n    }\n\n    var createRowResult = function(total) {\n        var result = parseInt(this.val()) / total;\n        result = result * 100;\n        result = result.toString().indexOf(\'.\') > -1 ? result.toFixed(2) : result;\n        result += \'%\';\n        this.next().find(\'.zbprecent\').text(result);\n    }\n\n    var changeWeight = function(self) {\n        $(\'#changeWeight\', self).selectSmart({\n            callback: function(i, k, v) {\n                switch (v) {\n                    case \'1\':\n                        self.find(\'.ext-body > ul >li > div\')\n                        break;\n                    case \'2\':\n                        break;\n                    case \'3\':\n                        break;\n                }\n            }\n        });\n    }\n\n    var toggleLevel = function(self) {\n        $(\'#changeLevel\', self).selectSmart({\n            callback: function(i, k, v) {\n                switch (v) {\n                    case \'1\':\n                        var togger1 = self.find(\'.ext-body > ul > li > .mainkey i.icon-toggle\');\n                        Pui.togExpand(togger1);\n                        break;\n                    case \'2\':\n                        var togger1 = self.find(\'.ext-body > ul > li > .mainkey i.icon-toggle\');\n                        Pui.togCollapse(togger1);\n                        var togger2 = self.find(\'.ext-body > ul > li > ul > li > .mainkey i.icon-toggle\');\n                        Pui.togExpand(togger2);\n                        break;\n                    case \'3\':\n                        var togger1 = self.find(\'.ext-body > ul > li > .mainkey i.icon-toggle\');\n                        Pui.togCollapse(togger1);\n                        var togger2 = self.find(\'.ext-body > ul > li > ul > li > .mainkey i.icon-toggle\');\n                        Pui.togCollapse(togger2);\n                        break;\n                }\n            }\n        });\n    }\n\n\n    new Tree({\n        tree: tree.dom,\n        data: startData.theme3,\n        main: tree.main,\n        width: tree.width,\n        alias: tree.alias,\n        // 头部\n        header: tree.header,\n        // 副头部\n        headersub: tree.headersub,\n        // 列表树\n        collapse: tree.collapse,\n        callback: function(self) {\n            $.when(checkoutTree()).done(function(c) {\n                insertLevel(c, self);\n            });\n            // toggleLevel(self);\n            changePrecent(self);\n            // changeWeight(self);\n        }\n    });\n\n\n    \n    var loopdata = \'[{"title":{"Name":"branch46（3人）","OrgStructureDepartmentId":-1},"children":[{"title":{"Name":"市场部（1人）","OrgStructureDepartmentId":371},"children":[{"title":{"Name":"杭州分部（1人）","OrgStructureDepartmentId":372},"children":[],"chkBoxAttr":null,"LongName":null,"OrgStructureDepartmentId":372,"CustomerId":1000000,"Name":"杭州分部（1人）","OrgCode":"371-372","Level":2,"Status":1,"CreatedDate":"2018-07-05T16:01:06.79","Creater":"admin","ModifiedDate":null,"Modifier":null,"DeletedDate":null,"Deleter":null}],"chkBoxAttr":null,"LongName":null,"OrgStructureDepartmentId":371,"CustomerId":1000000,"Name":"市场部（1人）","OrgCode":"371","Level":1,"Status":1,"CreatedDate":"2018-07-05T16:01:06.787","Creater":"admin","ModifiedDate":null,"Modifier":null,"DeletedDate":null,"Deleter":null},{"title":{"Name":"挨踢部（2人）","OrgStructureDepartmentId":373},"children":[{"title":{"Name":"抓娃组（1人）","OrgStructureDepartmentId":374},"children":[{"title":{"Name":"抓娃1组（1人）","OrgStructureDepartmentId":375},"children":[{"title":{"Name":"加班组（1人）","OrgStructureDepartmentId":377},"children":[{"title":{"Name":"周末加班组（1人）","OrgStructureDepartmentId":378},"children":[],"chkBoxAttr":null,"LongName":null,"OrgStructureDepartmentId":378,"CustomerId":1000000,"Name":"周末加班组（1人）","OrgCode":"373-374-375-377-378","Level":5,"Status":1,"CreatedDate":"2018-07-05T16:03:58.12","Creater":"admin","ModifiedDate":null,"Modifier":null,"DeletedDate":null,"Deleter":null}],"chkBoxAttr":null,"LongName":null,"OrgStructureDepartmentId":377,"CustomerId":1000000,"Name":"加班组（1人）","OrgCode":"373-374-375-377","Level":4,"Status":1,"CreatedDate":"2018-07-05T16:03:48.937","Creater":"admin","ModifiedDate":null,"Modifier":null,"DeletedDate":null,"Deleter":null}],"chkBoxAttr":null,"LongName":null,"OrgStructureDepartmentId":375,"CustomerId":1000000,"Name":"抓娃1组（1人）","OrgCode":"373-374-375","Level":3,"Status":1,"CreatedDate":"2018-07-05T16:03:27.15","Creater":"admin","ModifiedDate":null,"Modifier":null,"DeletedDate":null,"Deleter":null},{"title":{"Name":"抓娃2组（0人）","OrgStructureDepartmentId":376},"children":[],"chkBoxAttr":null,"LongName":null,"OrgStructureDepartmentId":376,"CustomerId":1000000,"Name":"抓娃2组（0人）","OrgCode":"373-374-376","Level":3,"Status":1,"CreatedDate":"2018-07-05T16:03:36.08","Creater":"admin","ModifiedDate":null,"Modifier":null,"DeletedDate":null,"Deleter":null}],"chkBoxAttr":null,"LongName":null,"OrgStructureDepartmentId":374,"CustomerId":1000000,"Name":"抓娃组（1人）","OrgCode":"373-374","Level":2,"Status":1,"CreatedDate":"2018-07-05T16:03:13.46","Creater":"admin","ModifiedDate":null,"Modifier":null,"DeletedDate":null,"Deleter":null}],"chkBoxAttr":null,"LongName":null,"OrgStructureDepartmentId":373,"CustomerId":1000000,"Name":"挨踢部（2人）","OrgCode":"373","Level":1,"Status":1,"CreatedDate":"2018-07-05T16:01:25.58","Creater":"admin","ModifiedDate":"2018-07-05T16:02:16.32","Modifier":"admin","DeletedDate":null,"Deleter":null}],"chkBoxAttr":null,"LongName":null,"OrgStructureDepartmentId":null,"CustomerId":null,"Name":"branch46（3人）","OrgCode":"","Level":null,"Status":null,"CreatedDate":null,"Creater":null,"ModifiedDate":null,"Modifier":null,"DeletedDate":null,"Deleter":null}]\';\n\n    new Tree({\n        tree: $(\'#weightLoop\'),\n        data: JSON.parse(loopdata),\n        dw: 20,\n        main: [true],\n        width: [\'100%\'],\n        alias: [\'name\'],\n        header: [],\n        headersub: [],\n        collapse: [\n            {\n                title: \'title\',\n                formatter: function (v) {\n                    return \'<em class="icon icon-folder"></em><a class="ellipsis block c-gray2 pdr10" href="javascript:void(0)" title="\' + v.Name + \'">\' + v.Name + \'</a><input type="hidden" orgid="\' + v.OrgStructureDepartmentId + \'" />\'\n                }\n            }\n        ],\n        callback: function (self) {}\n    });\n\n\n    \n\n\n\n})\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/_jquery@3.3.1@jquery/dist/jquery.min.js"), __webpack_require__(/*! pjt-ui */ "./node_modules/_pjt-ui@1.0.6@pjt-ui/pui.min.js")))\n\n//# sourceURL=webpack:///./assets/admin/entry/tree.js?')}});