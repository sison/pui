<div class="pdlr20" id="addRelationship">
    <div class="page-feature ffv">
        <ul class="inline clearfix">
            <li class="req cur"><a href="javascript:void(0)">样式一<em></em></a></li>
            <li class="req"><a href="javascript:void(0)">样式二<em></em></a></li>
        </ul>
    </div>
    <div class="sp10"></div>
    <div class="sp10"></div>
    <div class="page-feature-body ffv">
        <div class="ref">
            <div class="setFunction bgc-gray6 clearfix">
                <div class="funBtns fl">
                    <ul class="inline">
                        <li><a href="javascript:void(0);" class="btn btn-common mgr10 ffv ant c-gray3" id="btn-create-relationship">添加评估关系</a></li>
                    </ul>
                </div>
            </div>
            <div class="page-table">
                <div class="overflow-table">
                    <table class="table table-center table-song table-relative view-container" id="addRelTableData">
                        <thead>
                            <tr class="header">
                                <th width="25%">
                                    <div class="check-group clearfix checkboxes">
                                        <div class="checkone inline">
                                            <input type="checkbox" name="chkboxbj" value="all" />
                                            <span class="pdl10">评估关系</span>
                                        </div>
                                    </div>
                                </th>
                                <th width="25%">对外名称</th>
                                <th width="25%">英文名称</th>
                                <th width="25%">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
                <script type="text/javascript">
                var tableData = {
                    "Data": [{
                        "_rowid_": 1,
                        "UserId": 503443,
                        "CustomerId": 1000071,
                        "Account": "123456",
                        "OutName": "小红",
                        "EnglishName": "Jackson",
                        "Sex": "男",
                        "Password": "Ns76tu",
                        "Email": "123@123.com",
                        "Mobile": "13690875421",
                        "School": null,
                        "CreatedDate": "2016-04-22T17:48:01.07",
                        "Creater": "jianfeng.zou",
                        "ModifiedDate": "2016-05-25T10:52:02.29",
                        "Modifier": "admin",
                        "ExamStatus": 0,
                        "UserExtensionFieldId": 280144,
                        "ExamStatusDesc": "未开始",
                        "EvaluationCount": 0,
                        "EvaluationRelationshipName": "自评",
                        "ExamMode": 1,
                        "JoinTime": "2016-05-25 10:52:02",
                        "Status": "0"
                    }, {
                        "_rowid_": 1,
                        "UserId": 503443,
                        "CustomerId": 1000071,
                        "Account": "123456",
                        "OutName": "小绿",
                        "EnglishName": "Jackson",
                        "Sex": "男",
                        "Password": "Ns76tu",
                        "Email": "123@123.com",
                        "Mobile": "13690875421",
                        "School": null,
                        "CreatedDate": "2016-04-22T17:48:01.07",
                        "Creater": "jianfeng.zou",
                        "ModifiedDate": "2016-05-25T10:52:02.29",
                        "Modifier": "admin",
                        "ExamStatus": 0,
                        "UserExtensionFieldId": 280144,
                        "ExamStatusDesc": "未开始",
                        "EvaluationCount": 0,
                        "EvaluationRelationshipName": "上级",
                        "ExamMode": 1,
                        "JoinTime": "2016-05-25 10:52:02",
                        "Status": "0"
                    }, {
                        "_rowid_": 1,
                        "UserId": 503443,
                        "CustomerId": 1000071,
                        "Account": "123456",
                        "OutName": "小白",
                        "EnglishName": "Jackson",
                        "Sex": "男",
                        "Password": "Ns76tu",
                        "Email": "123@123.com",
                        "Mobile": "13690875421",
                        "School": null,
                        "CreatedDate": "2016-04-22T17:48:01.07",
                        "Creater": "jianfeng.zou",
                        "ModifiedDate": "2016-05-25T10:52:02.29",
                        "Modifier": "admin",
                        "ExamStatus": 0,
                        "UserExtensionFieldId": 280144,
                        "ExamStatusDesc": "未开始",
                        "EvaluationCount": 0,
                        "EvaluationRelationshipName": "同级",
                        "ExamMode": 1,
                        "JoinTime": "2016-05-25 10:52:02",
                        "Status": "0"
                    }, {
                        "_rowid_": 1,
                        "UserId": 503443,
                        "CustomerId": 1000071,
                        "Account": "123456",
                        "OutName": "小黑",
                        "EnglishName": "Jackson",
                        "Sex": "男",
                        "Password": "Ns76tu",
                        "Email": "123@123.com",
                        "Mobile": "13690875421",
                        "School": null,
                        "CreatedDate": "2016-04-22T17:48:01.07",
                        "Creater": "jianfeng.zou",
                        "ModifiedDate": "2016-05-25T10:52:02.29",
                        "Modifier": "admin",
                        "ExamStatus": 0,
                        "UserExtensionFieldId": 280144,
                        "ExamStatusDesc": "未开始",
                        "EvaluationCount": 0,
                        "EvaluationRelationshipName": "同级",
                        "ExamMode": 1,
                        "JoinTime": "2016-05-25 10:52:02",
                        "Status": "0"
                    }, {
                        "_rowid_": 1,
                        "UserId": 503443,
                        "CustomerId": 1000071,
                        "Account": "123456",
                        "OutName": "小美",
                        "EnglishName": "Season",
                        "Sex": "女",
                        "Password": "Ns76tu",
                        "Email": "123@123.com",
                        "Mobile": "13690875421",
                        "School": null,
                        "CreatedDate": "2016-04-22T17:48:01.07",
                        "Creater": "jianfeng.zou",
                        "ModifiedDate": "2016-05-25T10:52:02.29",
                        "Modifier": "admin",
                        "ExamStatus": 0,
                        "UserExtensionFieldId": 280144,
                        "ExamStatusDesc": "未开始",
                        "EvaluationCount": 0,
                        "EvaluationRelationshipName": "客户",
                        "ExamMode": 1,
                        "JoinTime": "2016-05-25 10:52:02",
                        "Status": "1"
                    }]
                };
                </script>
                <script type="text/x-jquery-tmpl" id="addRelTableTmpl">
                    {{each(i,item) Data}}
                    <tr>
                        <td>
                            <div class="check-group clearfix checkboxes">
                                <div class="checkone inline">
                                    <input type="checkbox" name="chkboxbj" value="${i}" />
                                    <span class="pdl10">${item.EvaluationRelationshipName}</span>
                                </div>
                            </div>
                        </td>
                        <td>${item.OutName}</td>
                        <td>${item.EnglishName}</td>
                        {{if item.Status==1}}
                        <td>
                            <span class="txtsp" style="padding-left:39px;"><a href="javascript:void(0)" class="c-blue tu edict">修改</a></span>
                            <span class="txtsp"><a href="javascript:void(0)" class="c-blue tu del">删除</a></span>
                        </td>
                        {{else}}
                        <td>
                            <span class="txtsp"><a href="javascript:void(0)" class="c-blue tu edict">修改</a></span>
                        </td>
                        {{/if}}
                    </tr>
                    {{/each}}
                </script>
            </div>
        </div>
        <div class="ref hide">
            <div class="page-table">
                <div class="overflow-table">
                    <table class="table table-center table-song table-relative view-container" id="addRelTableData2">
                        <thead>
                            <tr class="header">
                                <th width="20%">
                                    <div class="check-group clearfix checkboxes2">
                                        <div class="checkone inline">
                                            <input type="checkbox" name="chkboxbj2" value="all" />
                                            <span class="pdl10">评估关系</span>
                                        </div>
                                    </div>
                                </th>
                                <th width="20%">对外名称</th>
                                <th width="20%">英文名称</th>
                                <th width="20%">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
                <script type="text/javascript">
                var tableData2 = {
                    "Data": [{
                        "_rowid_": 1,
                        "UserId": 503443,
                        "CustomerId": 1000071,
                        "Account": "123456",
                        "OutName": "小红",
                        "EnglishName": "Jackson",
                        "Sex": "男",
                        "Password": "Ns76tu",
                        "Email": "123@123.com",
                        "Mobile": "13690875421",
                        "School": null,
                        "CreatedDate": "2016-04-22T17:48:01.07",
                        "Creater": "jianfeng.zou",
                        "ModifiedDate": "2016-05-25T10:52:02.29",
                        "Modifier": "admin",
                        "ExamStatus": 0,
                        "UserExtensionFieldId": 280144,
                        "ExamStatusDesc": "未开始",
                        "EvaluationCount": 0,
                        "EvaluationRelationshipName": "自评",
                        "ExamMode": 1,
                        "JoinTime": "2016-05-25 10:52:02",
                        "Status": "0",
                        "EvaluationType": 1
                    }, {
                        "_rowid_": 1,
                        "UserId": 503443,
                        "CustomerId": 1000071,
                        "Account": "123456",
                        "OutName": "小绿",
                        "EnglishName": "Jackson",
                        "Sex": "男",
                        "Password": "Ns76tu",
                        "Email": "123@123.com",
                        "Mobile": "13690875421",
                        "School": null,
                        "CreatedDate": "2016-04-22T17:48:01.07",
                        "Creater": "jianfeng.zou",
                        "ModifiedDate": "2016-05-25T10:52:02.29",
                        "Modifier": "admin",
                        "ExamStatus": 0,
                        "UserExtensionFieldId": 280144,
                        "ExamStatusDesc": "未开始",
                        "EvaluationCount": 0,
                        "EvaluationRelationshipName": "他评",
                        "ExamMode": 1,
                        "JoinTime": "2016-05-25 10:52:02",
                        "Status": "0",
                        "EvaluationType": 2
                    }]
                };
                </script>
                <script type="text/x-jquery-tmpl" id="addRelTableTmpl2">
                    {{each(i,item) Data}}
                    <tr>
                        <td>
                            <div class="check-group clearfix checkboxes2">
                                <div class="checkone inline">
                                    <input type="checkbox" name="chkboxbj2" value="all" />
                                    <span class="pdl10">${item.EvaluationRelationshipName}</span>
                                </div>
                            </div>
                        </td>
                        <td>${item.OutName}</td>
                        <td>${item.EnglishName}</td>
                        <td>
                            <span class="txtsp"><a href="javascript:void(0)" class="c-blue tu edict">修改</a></span>
                        </td>
                    </tr>
                    {{/each}}
                </script>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
$(function() {
    var req = $('#addRelationship .page-feature');
    var res = $('#addRelationship .page-feature-body');
    tabSwitch(req, res);

    //样式一渲染
    var tableObj = $('#addRelTableData');
    var tableTmpl = $('#addRelTableTmpl');
    var queryUrl = 'assets/admin/v4.0.3/json/add-relationship.json'; //数据接口

    var tablesimple = new TableSimple(tableObj, tableTmpl, {
        bgcCtrl: true, // 是否控制表格行背景色
        hoverColor: '#ffc',
        oddColor: '#fff',
        evenColor: '#fff',
        dataSource: tableData, // 首屏数据
        isquery: false, // 是否带查询
        pageCtrl: false, // 是否有分页
        queryUrl: queryUrl, // 数据接口
        container: $('tbody', tableObj),
        dateFormat: 'YYYY-MM-DD', // 查询时间格式
        afterLoadCallback: function() { // 数据渲染后回调事件
            $('.checkboxes input[type=checkbox]').checkboxSmart({
                callback: function(self, bool) {
                    if (bool) {
                        if (self.context.value == 'all') {
                            $('.checkboxes').each(function(index, value) {
                                if (index > 0) {
                                    $(this).find('.checkone').addClass('checked');
                                }
                            })
                        }
                    } else {
                        if (self.context.value == 'all') {
                            $('.checkboxes').each(function(index, value) {
                                if (index > 0) {
                                    $(this).find('.checkone').removeClass('checked');
                                }
                            })
                        }
                    }
                }, // 点击后回调事件
                checkCallback: function(self, bool) {}, // 选中回调事件
                uncheckCallback: function(self, bool) {} // 反选回调事件
            });
        }
    });

    //样式二渲染
    var tableObj2 = $('#addRelTableData2');
    var tableTmpl2 = $('#addRelTableTmpl2');
    var queryUrl2 = 'assets/admin/v4.0.3/json/add-relationship2.json'; //数据接口

    var tablesimple = new TableSimple(tableObj2, tableTmpl2, {
        bgcCtrl: true, // 是否控制表格行背景色
        hoverColor: '#ffc',
        oddColor: '#fff',
        evenColor: '#fff',
        dataSource: tableData2, // 首屏数据
        isquery: false, // 是否带查询
        pageCtrl: false, // 是否有分页
        queryUrl: queryUrl2, // 数据接口
        container: $('tbody', tableObj2),
        dateFormat: 'YYYY-MM-DD', // 查询时间格式
        afterLoadCallback: function() { // 数据渲染后回调事件
            $('.checkboxes2 input[type=checkbox]').checkboxSmart({
                callback: function(self, bool) {
                    if (bool) {
                        if (self.context.value == 'all') {
                            $('.checkboxes2').each(function(index, value) {
                                if (index > 0) {
                                    $(this).find('.checkone').addClass('checked');
                                }
                            })
                        }
                    } else {
                        if (self.context.value == 'all') {
                            $('.checkboxes2').each(function(index, value) {
                                if (index > 0) {
                                    $(this).find('.checkone').removeClass('checked');
                                }
                            })
                        }
                    }
                }, // 点击后回调事件
                checkCallback: function(self, bool) {}, // 选中回调事件
                uncheckCallback: function(self, bool) {} // 反选回调事件
            });
        }
    });

    // 添加评估关系
    $('#btn-create-relationship').on('click', function() {
        ceng.hello({
            title: '添加评估关系',
            content: 'assets/admin/v4.0.3/remotePage/add-relationship-create.html',
            contentType: 'url',
            area: [500, 'auto'],
            complete: function() {
                // valid.input($('#relativeName'));
                valid.form($('#createRelaForm'));
            },
            yes: function() {
                valid.form($('#createRelaForm'), {
                    isAsync: true,
                    asyncFun: function() {
                        ajax({

                        }).done(function() {

                        });
                    }
                });
            },
            no: function() {}
        })
    });

    // 样式一-操作
    $('#addRelTableData tbody tr').each(function(index, value) {
        // 修改评估关系
        $(this).find('td').eq(3).find('.edict').on('click', function() {
            ceng.hello({
                title: '修改评估关系',
                content: 'assets/admin/v4.0.3/remotePage/add-relationship-edict.html',
                contentType: 'url',
                area: [500, 'auto'],
                complete: function() {
                    valid.form($('#edictRelaForm'));
                },
                yes: function() {
                    valid.form($('#edictRelaForm'), {
                        isAsync: true,
                        asyncFun: function() {
                            ajax({

                            }).done(function() {

                            });
                        }
                    });
                },
                no: function() {}
            })
        });
        // 删除评估关系
        $(this).find('td').eq(3).find('.del').on('click', function() {
            $(this).parents('tr').remove();
        });
    });


    //样式二-操作
    $('#addRelTableData2 tbody tr').each(function(index, value) {
        //修改评估关系
        $(this).find('td').eq(3).find('.edict').on('click', function() {
            ceng.hello({
                title: '修改评估关系',
                content: 'assets/admin/v4.0.3/remotePage/add-relationship-edict.html',
                contentType: 'url',
                area: [500, 'auto'],
                complete: function() {
                    valid.form($('#edictRelaForm'));
                },
                yes: function() {
                    valid.form($('#edictRelaForm'), {
                        isAsync: true,
                        asyncFun: function() {
                            ajax({

                            }).done(function() {

                            });
                        }
                    });
                },
                no: function() {}
            })
        });
    });

});
</script>
