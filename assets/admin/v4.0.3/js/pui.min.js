!function(e,t,a){var i={type:1,opacity:.5,move:!0,btn:["确定","取消"],title:"标题",content:"",inStyle:"fadeIn",area:["auto","auto"],closeBtn:!0,zindex:19900207,success:function(){},end:function(){},yes:function(e,t){},no:function(e,t){},complete:function(){},close:function(){}},n=0,s={},r=function(){};r.prototype.msg=function(e,t){return o("msg",i,t,e),this},r.prototype.loading=function(e){return o("loading",i,e),this},r.prototype.alert=function(e,t){return o("alert",i,t,e),this},r.prototype.comfirm=function(e,t){return o("comfirm",i,t,e),this},r.prototype.hello=function(e){return o("hello",i,e),this},r.prototype.iframe=function(e){return o("iframe",i,e),this},r.prototype.close=function(t,a){var n=e("#ceng"+t),r=e("#black"+t);return n.fadeOut(100,function(){var t=p(i);"undefined"!=a&&"object"==typeof a&&(t=e.extend(p(i),a)),n.remove(),"function"==typeof t.end&&t.end()}),r.fadeOut(200,function(){r.remove()}),"dom"===n.attr("type")&&e("body").append(s[t]),this},r.prototype.closeAll=function(){return e(".ceng, .ceng-black").fadeOut(200,function(){e(this).remove()}),this};var o=function(t,a,i,r){var o=p(a);if("undefined"!=i&&"object"==typeof i&&(o=e.extend(p(a),i)),"hello"==t&&"url"==o.contentType)e.ajax({type:"GET",url:o.content,data:o.contentData,dataType:"html",beforeSend:function(){ceng.loading()}}).done(function(i){c(t);var n=l(t,a.zindex,o);e("body").append(n);var s=e("#ceng"+a.zindex),r=s.find(".ceng-content");r.append(i),d(t,s,o,a.zindex),r.css({overflow:"auto"}),a.zindex++}).fail(function(){ceng.msg("请求失败！",{state:"notice"})}).always(function(){ceng.close(n)});else{c(t);var u=r||"",h=l(t,a.zindex,o,u);e("body").append(h);var f=e("#ceng"+a.zindex);switch(t){case"msg":if(o.hasOwnProperty("state")){var v=o.state||"normal";switch(v){case"notice":f.addClass("notice").children(".ceng-content").append('<i class="icon icon-state icon-sign-full"></i>');break;case"resolve":f.addClass("resolve").children(".ceng-content").append('<i class="icon icon-state icon-resolve-full"></i>')}}break;case"alert":break;case"comfirm":break;case"loading":n=a.zindex;break;case"hello":"dom"===o.contentType&&(s[a.zindex]=e.trim(o.content[0].outerHTML),o.content.remove(),f.find(".ceng-content").append(s[a.zindex]).children().show(),f.attr("type","dom"));break;case"iframe":}d(t,f,o,a.zindex),a.zindex++}},l=function(e,t,a,i){var n='<div class="ceng ceng-'+e+" "+a.inStyle+'" id="ceng'+t+'">',s='<a href="javascript:void(0)" class="close-win"><i class="icon icon-close ant"></i></a>',r='<div class="ceng-title"><p class="ellipsis">'+a.title+"</p>"+s+"</div>",o='<div class="ceng-content"></div>',l='<div class="ceng-content">'+i+"</div>",c='<div class="ceng-loader"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>',d='<div class="ceng-content"><iframe frameborder="0"></iframe></div>',p='<div class="ceng-btn clearfix"><div class="absolutecenter">';if(a.btn.length)if("alert"==e)p+='<a href="javascript:void(0)" class="btn operbtn btn0 acsub">'+a.btn[0]+"</a>";else for(var u=0,h=a.btn.length;u<h;u++)p+='<a href="javascript:void(0)" class="btn operbtn btn'+u+' acsub">'+a.btn[u]+"</a>";switch(p+="</div></div>",0===a.btn&&(p=""),e){case"msg":n+=l;break;case"loading":n='<div class="ceng ceng-loading" id="ceng'+t+'">',n+=c;break;case"alert":n+=r,n+=l,n+=p;break;case"comfirm":a.hasOwnProperty("style")&&(n='<div class="ceng ceng-comfirm comfirm'+a.style+" "+a.inStyle+'" id="ceng'+t+'">',r='<div class="ceng-title">'+s+"</div>"),n+=r,n+=l,n+=p;break;case"hello":a.hasOwnProperty("style")&&(n='<div class="ceng ceng-hello hello'+a.style+" "+a.inStyle+'" id="ceng'+t+'">',r='<div class="ceng-title">'+s+"</div>"),n+=r,n+=o,n+=p;break;case"iframe":n+=r,n+=d,n+=p}return n+="</div>"},c=function(t){var a=0;a="msg"==t||"loading"==t?0:i.opacity;var n='<div class="ceng-black" id="black'+i.zindex+'" style="opacity:'+a+";filter: alpha(opacity="+a+')"></div>';e("body").append(n),e("#black"+i.zindex).css("z-index",i.zindex).show()},d=function(a,i,n,s){var r=0,o=0,l=0;if("msg"==a||"loading"==a)r=i.outerWidth(),o=i.outerHeight(),i.css({"margin-left":-r/2,"margin-top":-o/2,"z-index":s});else{"alert"!=a&&"comfirm"!=a||(l=60,r="auto"==n.area[0]?i.outerWidth()>500?500:i.outerWidth():n.area[0],i.css("width",r),o="auto"==n.area[1]?i.outerHeight():n.area[1],i.css("height",o)),"hello"!=a&&"iframe"!=a||(r="auto"==n.area[0]?i.outerWidth():n.area[0],i.css("width",r),o="auto"==n.area[1]?i.height()>=e(t).height()?e(t).height()-40:i.outerHeight():n.area[1]>=e(t).height()?e(t).height()-40:n.area[1],i.css("height",o)),i.css({"margin-left":-r/2,"margin-top":-o/2,"z-index":s});var c=i.find(".ceng-btn").outerHeight(),d=i.find(".ceng-title").outerHeight();i.find(".ceng-content").css({height:o-c-d-l})}if(i.removeClass(n.inStyle),"iframe"==a&&n.hasOwnProperty("url")){var p=n.url||"http://www.benbenla.com/";i.find("iframe").attr("src",p)}if(i.find(".operbtn").on("click",function(){var t=e(this).index()+1;1===t?"alert"==a?(n.yes(i,s),ceng.close(s,n)):n.hasOwnProperty("btn1")?n.btn1(i,s):n.yes(i,s):2===t?n.hasOwnProperty("btn2")?n.btn2(i,s):(n.no(i,s),ceng.close(s,n)):n["btn"+t](i,s)}),i.find(".close-win").on("click",function(){ceng.close(s,n)}),setTimeout(function(){n.complete(i,s)},100),"msg"==a){var u="msg"==a?n.time||2e3:n.time||9999999999;setTimeout(function(){ceng.close(s,n)},u)}},p=function(e){var t=e instanceof Array?[]:{};for(var a in e)t[a]=typeof e[a]===Object?p(e[a]):e[a];return t};ceng=new r}(jQuery,window,document),function(e,t,a){e.fn.checkboxSmart=function(t){var a={callback:function(){},checkCallback:function(){},uncheckCallback:function(){}},i=e.extend(a,t);return this.each(function(){var t=new Checkobj(e(this),i);t.init()})},Checkobj=function(e,t){this.ele=e,this.opts=t,this.id=this.ele.attr("id"),this.name=this.ele.attr("name")},Checkobj.prototype.init=function(){this.render(),this.watch()},Checkobj.prototype.render=function(){var e=this,t="",a=e.ele.prop("checked")?" checked":"",i=e.ele.is(":disabled")?"disabled":"";return t+='<i class="ant icon"></i>',e.ele.before(t),e.ele.parent(".checkone").addClass("isrender").addClass(a).addClass(i),this},Checkobj.prototype.watch=function(){var t=this,a=t.ele.parent(".checkone");return a.on("click",function(){if(!t.ele.is(":disabled")){var a=e(this).find("input[type=checkbox]").is(":checked");a?(e(this).removeClass("checked"),t.opts.uncheckCallback(t.ele)):(e(this).addClass("checked"),t.opts.checkCallback(t.ele)),e(this).find("input[type=checkbox]").prop("checked",!a),t.opts.callback(t.ele,!a)}}),this}}(jQuery,window,document),function(e,t,a,i){e.fn.pager=function(t){var a={pageIndex:1,pageSize:10,totalItem:100,pageSizeArr:[10,20,50,100]||[10],singlePage:!1,url:"",action:function(){}},i=e.extend({},a,t);return this.each(function(){var t=new n(e(this),i);t.init(i.pageIndex,i.pageSize)})};var n=function(e,t){this.ele=e,this.opts=t};n.prototype.init=function(e,t){var a=this;a.render(e,t),a.watch(),a.callback(e,t,a.getTotalPage(t))},n.prototype.getTotalPage=function(e){var t=this,a=Math.ceil(t.opts.totalItem/e);return a},n.prototype.getState=function(e,t){var a=this,i=1==a.getTotalPage(e,t)?"disabled":"";return i},n.prototype.render=function(e,t){for(var a=this,i=a.getState(e,t),n="",s="",r=0;r<a.opts.pageSizeArr.length;r++)s=a.opts.pageSizeArr[r]===t?"selected":"",n+="<option value="+a.opts.pageSizeArr[r]+' class="ffm fs" '+s+">"+a.opts.pageSizeArr[r]+"</option>";var o="";o+='<ul class="pagUl clearfix">',o+='<li class="pagLi">',o+='<label class="control-label">共<span class="results sps">'+a.opts.totalItem+"</span>条记录</label>",o+="</li>",o+='<li class="pagLi pagNum">',o+='<span class="sps" id="curpage"></span> / <span class="sps" id="totalpage">1</span>',o+='<a href="javascript:;" class="ant '+i+'" id="firstPage">首页</a>',o+='<a href="javascript:;" class="ant '+i+'" id="prevPage">上一页</a>',o+='<a href="javascript:;" class="ant '+i+'" id="nextPage">下一页</a>',o+='<a href="javascript:;" class="ant '+i+'" id="lastPage">末页</a>',o+="</li>",o+='<li class="pagLi pagSize">',o+='<div class="form-group pull-left">',o+='<label class="control-label">每页显示</label>',o+='<div class="se-border">',o+='<div class="se-hidden">',o+='<select id="sizePage" class="ffm fs">',o+=n,o+="</select>",o+="</div>",o+="</div>",o+="&nbsp;条</div>",o+="</li>",o+='<li class="pagLi pagJump">',o+='<div class="form-group pull-left">',o+='<div class="btn-group jump-txt">',o+='<label class="control-label">跳转到&nbsp;',o+='<input class="txt" id="thePage" '+i+" />&nbsp;页&nbsp;",o+='<button type="button" class="btn" id="btnJump" '+i+">确定</button>",o+="</label>",o+="</div>",o+="</div>",o+="</li>",o+="</ul>",a.ele.empty().append(o)},n.prototype.watch=function(){var t=this;e(".pagNum a").on("click",function(){var a=t.ele.find("#curpage").text(),i=t.opts.singlePage?1:t.ele.find("#sizePage").val(),n=t.getTotalPage(i);if(!e(this).hasClass("disabled")){var n=t.getTotalPage(i),s=e(this).attr("id");switch(s){case"firstPage":a=1;break;case"prevPage":a--;break;case"nextPage":a++;break;case"lastPage":a=n}t.callback(a,i,n),t.opts.action(a,i)}}),t.ele.find("#sizePage").on("change",function(){var a=e(this).val(),i=t.getTotalPage(a);t.callback(1,a,i),t.opts.action(1,a)}),t.ele.find("#thePage").keyup(function(){var a=parseInt(e("#sizePage").val()),i=t.getTotalPage(a);e(this).val()>i?(e(this).addClass("error"),t.ele.find("#btnJump").prop("disabled",!0)):t.ele.find("#btnJump").prop("disabled",!1)}),t.ele.find("#btnJump").on("click",function(){var a=parseInt(e("#thePage").val()),i=parseInt(e("#sizePage").val()),n=t.getTotalPage(i);t.callback(a,i,n),t.opts.action(a,i)})},n.prototype.callback=function(e,t,a){var i=this;e>=a&&(e=a,i.ele.find("#nextPage, #lastPage").addClass("disabled"),a>1&&i.ele.find("#prevPage, #firstPage").removeClass("disabled")),e<a&&e>1&&i.ele.find(".pagNum a").removeClass("disabled"),e<=1&&(e=1,i.ele.find("#prevPage, #firstPage").addClass("disabled"),a>1&&i.ele.find("#nextPage, #lastPage").removeClass("disabled")),i.renderCallback(e,t)},n.prototype.renderCallback=function(e,t){var a=this,i=a.getTotalPage(t);a.ele.find("#curpage").text(e),a.ele.find("#totalpage").text(i)}}(jQuery,window,document),function(e,t,a){e.fn.popopSmart=function(t){var a={direct:"bottom"},n=e.extend({},a,t);return this.each(function(){var t=new i(e(this),n);t.init()})};var i=function(e,t){this.ele=e,this.opts=t};i.prototype.init=function(){this.watch()},i.prototype.watch=function(){var t=this,a="";t.ele.hasClass("pop-top")?a="top":t.ele.hasClass("pop-right")?a="right":t.ele.hasClass("pop-bottom")?a="bottom":t.ele.hasClass("pop-left")&&(a="left");var i=a||t.opts.direct,n=(t.ele.data("lean")||"center",t.ele.data("width")||"auto");return t.ele.children().length>0&&t.ele.on("mouseover",function(){var a=e(".popsub",t.ele);switch(i){case"top":var s=t.ele.outerHeight(),r=a.outerWidth();a.css({left:"50%",bottom:s+6,"margin-left":-r/2,width:n});break;case"right":break;case"bottom":var s=t.ele.outerHeight(),r=a.outerWidth();a.css({left:"-50%",top:s+10,"margin-left":-r/2+8,width:n});break;case"left":}}),this}}(jQuery,window,document),function(e,t,a){var i={dateformat:"YYYY-MM-DD hh:mm:ss",async:function(){}};QueryForm=function(t,a){this.ele=t,this.opts=e.extend({},i,a),this.init()},QueryForm.prototype.init=function(){this.toggleHeightSearch(),this.toggleDate(),this.toggleFilterline(),this.submit(),this.setOrder(),this.placeholder("每个关键字占一行 \n姓名1 \n姓名2 \n姓名3")},QueryForm.prototype.toggleHeightSearch=function(){var t=this;return e(".filter-line",t.ele).each(function(){var t=e(this).height();t>37&&(e(this).addClass("more").append('<a class="toggle bgc-gray6"><span>更多</span><i class="ico ico-arrow2"></i></a>'),e(".toggle",e(this)).on("click",function(){var a=e(this).attr("state")||1;1==a?(e(this).attr("state",0).parent().height(t),e(this).addClass("shown").find("span").html("收起")):(e(this).attr("state",1).parent().height(32),e(this).removeClass("shown").find("span").html("更多"))}))}),e("#higherBtn",t.ele).on("click",function(){var a=e(this).closest(".query-form").find(".highSearch");a.hasClass("show")?(e(this).html("高级搜索"),e("#IsAdvSearch",t.ele).val(0),a.removeClass("show")):(e(this).html("收起高级搜索"),e("#IsAdvSearch",t.ele).val(1),a.addClass("show"))}),this},QueryForm.prototype.toggleDate=function(){},QueryForm.prototype.setOrder=function(){var t=this;return e(".setOrder a",t.ele).on("click",function(){var a=e(this).parent(),i=a.siblings("li"),n="";e(this).attr("sortfield");a.addClass("cur"),i.removeClass("cur"),n=a.hasClass("all")?"desc":"desc"==e(this).attr("sort")?"asc":"desc",e(this).attr("sort",n).removeClass().addClass(n),t.go()}),this},QueryForm.prototype.toggleFilterline=function(){var t=this;return e(".filter-line",t.ele).each(function(){var a=e(this);a.on("click","a.selectItem",function(){if(e(this).hasClass("check")?"checkbox"==a.data("type")&&e(this).removeClass("check").find("input").prop("checked",!1):(e(this).addClass("check").find("input").prop("checked",!0),"radio"==a.data("type")&&e(this).siblings("a").removeClass("check").find("input").prop("checked",!1)),"openDate"==e(this).closest(".filter-line").attr("id")){var i,n,s,r=e("#sjt"),o=e("#ejt"),l=(e(".filter-line#openDate"),"");i=(new Date).getFullYear(),n=(new Date).getMonth()+1,1==n.toString().length&&(n="0"+n),s=(new Date).getDate(),l=i+"-"+n+"-"+s,r.val(l);var c=e(this).index();c>0?o.val(e(this).data("val")):o.val(l)}a.data("immediately")===!0&&t.go()})}),this},QueryForm.prototype.placeholder=function(a){var i=this,n=e("#hsearchlist",i.ele);return n.addClass("default"),n.on("blur",function(){n.val().length>0?n.removeClass("default").addClass("c-gray1"):n.removeClass("c-gray1").addClass("default")}).on("keydown",function(){n.removeClass("default")}),i.ele.on("click",".condition.button",function(e){var e=event||t.event;e.preventDefault?e.preventDefault():e.returnValue=!1,i.go()}),this},QueryForm.prototype.submit=function(){var t=this;return e(".gosubmit",t.ele).on("click",function(){t.go()}),this},QueryForm.prototype.getSerialize=function(){var e=this;return e.ele.serialize()},QueryForm.prototype.go=function(){var e=this,t=Pui.getQuery(e.ele);e.opts.async(t)}}(jQuery,window,document),function(e,t,a){e.fn.radioSmart=function(t){var a={isvalid:!1,validCallback:function(){},callback:function(e,t){}},n=e.extend({},a,t);return this.each(function(){var t=new i(e(this),n);t.init()})};var i=function(e,t){this.ele=e,this.opts=t,this.id=this.ele.attr("id"),this.name=this.ele.attr("name")};i.prototype.init=function(){this.render(),this.watch()},i.prototype.render=function(){var e=this,t="",a=e.ele.prop("disabled")?"disabled":"",i=e.ele.prop("checked")?" checked":"";return t+='<i class="radicon ant"></i>',e.ele.before(t),e.ele.parent().addClass("isrender").addClass(i).addClass(a),this},i.prototype.watch=function(){var e=this,t=e.ele.parent(".radione");e.ele.val();return e.ele.is(":disabled")||t.on("click",function(t){Pui.setRadioVal(e.ele,!0,e.opts.callback)}),this}}(jQuery,window,document),function(e,t,a){e.fn.selectSmart=function(t){var a={isvalid:!1,validCallback:function(){},callback:function(){}};e(document).bind("click",function(t){e(".curse").length>0&&e(".curse").removeClass("curse")});var n=e.extend({},a,t);return this.each(function(){var t=new i(e(this),n);t.init()})};var i=function(e,t){this.ele=e,this.opts=t,this.id=this.ele.attr("id")};i.prototype.init=function(){this.render(),this.watch()},i.prototype.render=function(){for(var e=this,t="_"+e.id,a=e.ele.get(0).selectedIndex,i=e.ele.find("option:selected").text(),n=(e.ele.find("option").length,e.ele.data("width")||"auto"),s="",r="",o=0,l=e.ele.find("option").length;o<l;o++){var c=e.ele.find("option").eq(o),d=c.text(),p=c.val()||"";s+=o==a?'<li class="curli" value="'+p+'">'+d+"</li>":'<li value="'+p+'">'+d+"</li>"}return r+='<div class="selector" id="'+t+'" style="width:'+n+'">',r+="<dl>",r+='<dt class="setitle"><a href="javascript:;" class="ellipsis">',r+=i,r+='</a><i class="ant"></i></dt>',r+='<dd class="selist ant">',r+="<ul>",r+=s,r+="</ul>",r+="</dd>",r+="</dl>",r+="</div>",e.ele.parent().append(r),this},i.prototype.watch=function(){var t=this,a=t.ele.attr("id"),i="_"+a,n=e("#"+i),s=t.ele.is(":disabled");return s?n.addClass("disabled"):(e(".selist li",n).on("click",function(a){var i=t.ele.get(0).selectedIndex;n.removeClass("curse");var s=e(".selist li",n).index(e(this)),r=e(this).text(),o=e(this).attr("value");s!=i&&(t.opts.isvalid?t.opts.validCallback(s,r,o,t.ele,n,t.opts.callback):Pui.selectChange(s,r,o,t.ele,n,t.opts.callback))}),n.find(".setitle").on("click",function(t){t.preventDefault(),t.returnValue=!1,curid=i,n.hasClass("curse")?n.removeClass("curse"):n.addClass("curse"),e(".selector").each(function(){e(this).attr("id")!=curid&&e(this).removeClass("curse")}),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0})),this}}(jQuery,window,document),function(e,t,a){e.fn.switchSmart=function(t){var a={leftName:"启用",rightName:"禁用",isvalid:!1,validCallback:function(){},enable:function(){},disable:function(){}},n=e.extend({},a,t);return this.each(function(){var t=new i(e(this),n);t.init()})};var i=function(e,t){this.ele=e,this.opts=t,this.id=this.ele.attr("id")};i.prototype.init=function(){this.render(),this.watch()},i.prototype.render=function(){var e=this,t="",a=e.ele.attr("id"),i=e.ele.data("align")||"left",n=1===parseInt(e.ele.val())?"on":"off",s=e.ele.is(":disabled");t+='<div class="switch-actor '+n+'" id="_'+a+'">',t+='<div class="switch-mover ant">',t+='<span class="switch-left">'+e.opts.leftName+"</span>",t+='<span class="switch-dot"></span>',t+='<span class="switch-right">'+e.opts.rightName+"</span>",t+="</div>",t+="</div>",e.ele.after(t);var r=e.ele.next(".switch-actor");switch(i){case"center":r.css("margin","0 auto");break;case"right":r.css("float","right")}return s&&r.addClass("disabled"),this},i.prototype.watch=function(){var e=this,t=e.ele.next(".switch-actor");return t.on("click",function(){e.opts.isvalid?e.opts.validCallback(e.ele,e.ele.val()):(console.log(Pui),Pui.toggleSwitchState(e.ele,{enable:e.opts.enable,disable:e.opts.disable}))}),this}}(jQuery,window,document),function(e,t,a){var i={bgcCtrl:!1,hoverColor:"#fff7d7",oddColor:"#fff",evenColor:"#f6f6f6",datastyle:"local",dataSource:"",queryUrl:"",isquery:!0,queryObj:"",container:"",suppBack:!0,dateFormat:"YYYY-MM-DD HH : mm : ss",headCtrl:!0,pageCtrl:!0,isBase64:!1,afterLoadCallback:function(){}},n=function(t,a,n){this.opts=e.extend({},i,n),this.ele=t,this.tmpl=a};n.prototype.init=function(){},n.prototype.loadData=function(t,a,i){var n=this,s=n.opts.isBase64?e.parseJSON(Base64.decode(t)):t;n.opts.container.empty(),n.opts.container.append(n.tmpl.tmpl(s)),n.watch(),n.afterLoadData(n.ele,s)},n.prototype.afterLoadData=function(e,t){var a=this;a.opts.afterLoadCallback(e,t)},n.prototype.pageControl=function(a){var i=this,n=i.opts.isBase64?e.parseJSON(Base64.decode(a)):a;if(i.opts.pageCtrl){var s=i.ele.closest(".page-table"),r=s.find(".makePGbottom");r.length>0&&r.remove(),s.append('<div class="makePGbottom"><div class="pagination-out"><div class="pagination"></div></div></div>'),s.find(".pagination").pager({totalItem:n.TotalRecords||0,pageSize:n.PageSize||10,pageIndex:n.PageIndex||1,action:function(a,n){var s="";t.manualClick=!1,i.opts.isquery&&(s+=Pui.getQuery(i.opts.queryObj)),s+="&pageIndex="+a+"&pageSize="+n,location.hash=s,e.ajax({type:"GET",data:s,url:i.opts.queryUrl}).done(function(e){t.manualClick=!0,i.loadData(e)})}})}},n.prototype.watch=function(){var t=this;return t.opts.bgcCtrl&&(e("tbody tr:even",t.ele).css("backgroundColor",t.opts.evenColor),e("tbody tr:odd",t.ele).css("backgroundColor",t.opts.oddColor),e("tbody tr",t.ele).hover(function(){oriColor=e(this).css("backgroundColor"),e(this).css("backgroundColor",t.opts.hoverColor)},function(){e(this).css("backgroundColor",oriColor)})),this},n.prototype.query=function(){var a=this;new QueryForm(a.opts.queryObj,{dateformat:a.opts.dateFormat,async:function(i){t.manualClick=!1;var n=i;a.opts.suppBack&&(location.hash=n),e.ajax({type:"GET",data:n,url:a.opts.queryUrl}).done(function(e){t.manualClick=!0,a.loadData(e),a.pageControl(e)})}})};var s=t.TableSimple=function(t,a,n){this.opts=e.extend({},i,n),this.ele=t,this.tmpl=a,this.init()};s.prototype=new n,s.prototype.init=function(){this.render(),this.opts.suppBack&&this.hashcg(),this.opts.isquery&&this.query()},s.prototype.hashcg=function(){var a=this;t.manualClick=!1,t.onhashchange=function(){if(t.manualClick){var i=t.location.hash;i=i.length>0?i.replace("#",""):"",e.ajax({type:"GET",data:i,url:a.opts.queryUrl}).done(function(e){a.loadData(e),a.pageControl(e),t.manualClick=!0})}};var i=t.location.hash;if(i.length>1){i=i.substr(1,i.length);var n=i.split("&");e.each(n,function(){var t=this.split("="),a=t[0],i=t[1];a&&i&&e("[name="+a+"]").val(decodeURI(i))}),e.ajax({type:"GET",cache:!1,data:i,url:a.opts.queryUrl}).done(function(e){a.loadData(e),a.pageControl(e),t.manualClick=!0})}},s.prototype.renderHeader=function(){var e=this;return e.opts.headCtrl&&e.ele.find(".chktall").checkboxSmart({callback:function(t,a){e.ele.find("input.chktone").setCheck(a)}}),this},s.prototype.render=function(){var e=this;if(t.location.hash.length<=0)switch(e.opts.datastyle){case"local":e.loadData(e.opts.dataSource),e.pageControl(e.opts.dataSource);break;case"url":}},s.prototype.simpleRenderAgain=function(){var t=this;e.ajax({type:"GET",url:t.opts.queryUrl}).done(function(e){t.loadData(e),t.pageControl(e)})}}(jQuery,window,document),function(e,t,a){var i={},n=1;Tree=function(t){this.opts=e.extend(i,t),this.html=""},Tree.prototype.init=function(){this.render(),this.watch()},Tree.prototype.renderObj=function(t){var a=this,i=a.opts[t],n="ext-"+t,s=".ext-"+t;if(i&&i.length>0){for(var r='<div class="'+n+' clearfix">',o=0,l=i.length;o<l;o++){var c=o+1,d=i[o],p=i[o].alias||"th"+c,u=d.formatter&&"function"==typeof d.formatter?d.formatter():d.title;r+='<div class="fl ext '+p+'">',r+=u,r+="</div>"}r+="</div>",a.opts.tree.append(r),a.opts.tree.find(s).children(".ext").each(function(t){var i=a.opts.width[t]||"auto";e(this).width(i)})}return this},Tree.prototype.render=function(){var e=this,t=e.opts.data;e.renderObj("header"),e.renderObj("headersub");var a='<div class="ext-body clearfix">';return a+="<ul></ul>",a+="</div>",e.opts.tree.append(a),t.length>0&&(e.html+=e.renderOne(t),e.opts.tree.find(".ext-body ul").append(e.html),e.opts.hasOwnProperty("callback")&&e.opts.callback(e.opts.tree)),this},Tree.prototype.renderOne=function(e){for(var t=this,a=t.opts.collapse,i=t.opts.main||[],s=0;s<e.length;s++){var r=e[s];t.html+='<li class="row level'+n+' clearfix">';for(var o="",l=0;l<a.length;l++){var c="",d=t.opts.width[l]||"auto";i&&i[l]===!0&&(c="mainkey"),o+='<div class="'+t.opts.alias[l]+" "+c+'" style="float: left; width: '+d+'">',o+='<div class="inner">',r.children&&r.children.length>0&&i[l]===!0&&(o+='<i class="icon icon-toggle tc ant">-</i>'),o+="function"==typeof a[l].formatter?a[l].formatter(r[a[l].title])||" ":r[a[l].title]||"",o+="</div>",o+="</div>"}t.html+=o,r&&r.children.length>0?(n++,t.html+="<ul>",t.renderOne(r.children),t.html+="</ul>"):n--,t.html+="</li>"}return t.html},Tree.prototype.watch=function(){var t=this;t.opts.tree.find("i.icon-toggle");return t.opts.tree.on("click","i.icon-toggle",function(){var t=e(this).closest(".row").children("ul");e(this).hasClass("expand")?(e(this).removeClass("expand").addClass("collapse").text("-"),t.show()):(e(this).removeClass("collapse").addClass("expand").text("+"),t.hide())}),this}}(jQuery,window,document),function(e,t,a){var i={isAsync:!1,isRenderCheckbox:!1,isRenderRadio:!1,isRenderSelect:!1,isRenderUpload:!1,asyncFun:function(){}},n=!1,s={empty:"该字段不能为空",mail:"邮箱格式不正确",mobile:"手机格式不正确",idcard:"身份证格式不正确",six:"长度不能小于6位数",number:"请输入数字",website:"网址格式不正确",chinese:"请输入中文",psw1:"新旧密码不能相同",psw2:"新旧密码不能相同",psw2b:"两个新密码不相同",upload:"请选择上传文件",uploadformat:"上传的文件格式不正确"},r={mail:/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\_-])+\.)+([a-zA-Z0-9]{2,5})+$/,mobile:/^1[345789]\d{9}$/,chinese:/^[\u4E00-\u9FA5]+$/,num:/^\d+$/,idcard:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,six:/^\S{6,}$/,website:/(http\:\/\/)?([\w.]+)(\/[\w- \.\/\?%&=]*)?/gi};Valid=function(){},Valid.prototype.blurs=function(t,a){return e(".txt, .psw1, .psw2, .psw2b, textarea",t).each(function(){var t=e(this);t.on("blur",function(){o(t,a)})}),this},Valid.prototype.check=function(e,t){return o(e,t),this},Valid.prototype.checkall=function(t,a){return n=!0,e(".txt, .psw1, .psw2, .psw2b, .radio-group, .check-group, .upload-group, textarea, .select-group",t).each(function(){var t=e(this),a=t.data("reqs")||"",i=a.split(",")||[],r=t.data("req")||!1,o=l(t);if(""==e.trim(o))u(t,s.empty,r),r&&(n=!1);else if(i.length>0)for(var d=0;d<i.length;d++){var p=e.trim(i[d]);return"query"!=p&&c(t,p,o)?void(n=!1):void 0}}),this},Valid.prototype.submit=function(e,t){var a=this;return e.on("submit",function(i){return a.checkall(e,t),n&&t.isAsync?(i.preventDefault(),void t.asyncFun()):n}),this},Valid.prototype.form=function(t,a){var n=this,s=e.extend({},i,a);return n.blurs(t,s),n.submit(t,s),s.isRenderCheckbox&&n.checkbox(t,s),s.isRenderRadio&&n.radio(t,s),s.isRenderSelect&&n.select(e("select",t),s),s.isRenderUpload&&n.upload(e(".upload-group",t),s),this},Valid.prototype.input=function(t,a){var n=this;e.extend({},i,a);return t.on("blur",function(){n.check(t,a)}),this},Valid.prototype.checkbox=function(t,a){var n=e.extend({},i,a);return n.isRenderCheckbox?e("input[type=checkbox]",t).checkboxSmart({callback:function(e){var t=e.closest(".check-group"),a=t.data("req")||!1;a&&f(t)}}):e(".check-group",t).each(function(){var t=e(this),a=t.data("req")||!1;if(a){var i=t.find('input[type="checkbox"]');i.on("click",function(){f(t)})}}),this},Valid.prototype.radio=function(t,a){var n=e.extend({},i,a);return n.isRenderRadio?e("input[type=radio]",t).radioSmart({callback:function(e){var t=e.closest(".radio-group"),a=t.data("req")||!1;a&&f(t)}}):e(".radio-group",t).each(function(){var t=e(this),a=t.data("req")||!1;if(a){t.find("input[type=radio]");t.on("change",function(){f(e(this))})}}),this},Valid.prototype.select=function(t,a){var n=e.extend({},i,a);return n.isRenderSelect&&e(t).selectSmart({callback:function(e,t,a,i){var n=i.data("req")||!1;n&&f(i)}}),this},Valid.prototype.upload=function(t,a){e.extend({},i,a);return e(t).each(function(){var t=e(this),a=(t.data("req")||!1,t.find('input[type="file"]').eq(0)),i=t.find('input[type="text"]').eq(0);a.on("change",function(){var a=e(this).val(),n=a.lastIndexOf("\\"),s=a.substring(n+1,a.length);i.val(s),v(t,a)})}),this};var o=function(t,a){var i=t.data("reqs")||"",n=t.data("req")||!1,r=i.split(","),o=l(t);if(""==e.trim(o))u(t,s.empty,n);else{u(t,s.empty,!1);for(var d=0;d<r.length;d++){var p=e.trim(r[d]);if(c(t,p,o))return}}},l=function(e){var t,a=/(input|textarea)/,i=/select/;if(a.test(e.get(0).nodeName.toLowerCase())&&(t=e.val()||""),i.test(e.get(0).nodeName.toLowerCase())&&(t=e.find("option:selected").val()||""),e.hasClass("radio-group")||e.hasClass("check-group")){var n=e.find("input").eq(0).attr("name");t=e.find("input[name="+n+"]:checked").val()||""}if(e.hasClass("upload-group"))var t=e.find("input[type=file]").val()||"";return t},c=function(e,t,a){switch(t){case"six":return d(r.six,a)?u(e,s.six,!1):u(e,s.six,!0);case"mail":return d(r.mail,a)?u(e,s.mail,!1):u(e,s.mail,!0);case"mobile":return d(r.mobile,a)?u(e,s.mobile,!1):u(e,s.mobile,!0);case"idcard":return d(r.idcard,a)?u(e,s.idcard,!1):u(e,s.idcard,!0);case"chinese":return d(r.chinese,a)?u(e,s.chinese,!1):u(e,s.chinese,!0);case"psw1":return g(e,a,t);case"psw2":return g(e,a,t);case"psw2b":return g(e,a,t);case"upload":return v(e,a);case"query":m(e,a);break;default:return!1}},d=function(e,t){return e.test(t)},u=function(e,t,a){var i=e.data("show")||"append";switch(i){case"append":var n;e.parent().find(".errtip").remove(),a?(e.addClass("errself"),e.parent().append('<p class="errtip">'+t+"</p>"),clearTimeout(n),n=setTimeout(function(){e.parent().find(".errtip").remove()},1500)):e.removeClass("errself").parent().find(".errtip").remove();break;case"ceng":alert(t)}return e.attr("data-status",!a),a},h=function(e,t,a){u(e,t,a),u(e.find(".txt"),s.empty,a)},f=function(e,t){var a=l(e),i=""==a;return u(e,s.empty,i,t),i},v=function(e,t){var a=e.data("format")||"";if(a.length){var i=t.lastIndexOf("."),n=t.substring(i+1,t.length),r=a.indexOf(n)==-1;return h(e,s.uploadformat,r)}return h(e,s.uploadformat,r)},g=function(e,t,a){var i=e.closest("form").find(".psw1").eq(0).val(),n=e.closest("form").find(".psw2").eq(0).val(),r=e.closest("form").find(".psw2b").eq(0).val();switch(a){case"psw1":if(""!=n&&""!=t)return n==t?u(e,s.psw1,!0):u(e,s.psw1,!1);break;case"psw2":if(""!=i&&""!=t)return i==t?u(e,s.psw2,!0):u(e,s.psw2,!1);if(""!=r&&""!=t)return r!=t?u(e,s.psw2b,!0):u(e,s.psw2b,!1);break;case"psw2b":if(""!=n&&""!=t)return n!=t?u(e,s.psw2b,!0):u(e,s.psw2b,!1);break;default:return!1}},m=function(t,a){if(t.hasClass("errself"))u(t,t.attr("err-msg"),!0),n=!1;else{var i=t.attr("data-query")||"",s=(t.attr("name")||"",t.attr("query-string")||""),r="";if(s=e.parseJSON(s),"object"==typeof s)for(p in s)r+="&"+p+"="+s[p];var o=t.attr("name")+"="+t.val()+r;i.length&&e.ajax({type:"GET",dataType:"json",url:i,data:o,beforeSend:function(){}}).done(function(e){var a=!e.Status||!1;u(t,e.Message,a),a===!0?t.attr("err-msg",e.Message):t.removeAttr("err-msg")}).fail(function(e,t,a){}).always(function(){})}};valid=new Valid}(jQuery,window,document);var Pui=window.Pui={getCheckVal:function(e){var t=[];return e.find("input:checkbox:checked").each(function(){t.push($(this).val())}),t},setCheckVal:function(e,t){e.prop("checked",t),t?e.parent().addClass("checked"):e.parent().removeClass("checked")},getQuery:function(e){var t="";$(".setOrder a",e).each(function(){if($(this).parent().hasClass("cur")){var e=$(this).attr("sortfield"),a=$(this).attr("sort");t+="&"+e+"="+a}});var a=e.serialize();return a+t},setRadioVal:function(e,t,a){if(t&&t===!0){var i=e.attr("name")||"",n=$('input[name="'+i+'"]');n.parent(".radione").removeClass("checked"),e.parent(".radione").addClass("checked")}else e.parent().removeClass("checked");e.prop("checked",t);var s=e.val();"function"==typeof a&&a(e,s)},setRadioDisabled:function(e,t){var a=t||!0;a?e.prop("disabled",a).parent(".radione").addClass("disabled"):e.prop("disabled",a).parent(".radione").removeClass("disabled")},getRadioVal:function(e){var t="";return e.find("input:radio:checked").each(function(){return t=$(this).val(),!1}),t},selectChange:function(e,t,a,i,n,s){n.find(".setitle a").text(t),n.find(".selist li").eq(e).addClass("curli").siblings("li").removeClass("curli"),i.get(0).selectedIndex=e,"function"==typeof s&&s(e,t,a,i)},toggleSwitchState:function(e,t){var a=parseInt(e.val())||0,i=e.next(".switch-actor");e.is(":disabled")||(a?(e.val(0),i.removeClass("on").addClass("off"),t&&"object"==typeof t&&t.disable()):(e.val(1),i.removeClass("off").addClass("on"),t&&"object"==typeof t&&t.enable()))},togExpand:function(e){var t=e.closest(".row").children("ul");e.removeClass("collapse").addClass("expand").text("+"),t.toggle(!1)},togCollapse:function(e){var t=e.closest(".row").children("ul");e.removeClass("expand").addClass("collapse").text("-"),t.toggle(!0)}};module.exports=Pui;